#!/bin/bash

checkGitAuth() {
  if [[ $(git config user.email) ]]
  then
    echo 1
  else
    echo "Email Not Found"
    echo "Please set your email id using the below format:"
    echo "================================================"
    echo "git config --global user.email 'you@example.com'"
    echo "git config --global user.name 'Your Name'"
  fi
}


case $1 in
  -ga)
      checkval=$( checkGitAuth )
      if [ $checkval == 1 ]
      then
        git add $2
      fi
  ;;
  -gc)
      checkval=$( checkGitAuth )
      if [ $checkval == 1 ]
      then
        git add $2
        git commit -m "${3}"
      fi
  ;;
  -gph)
      checkval=$( checkGitAuth )
      if [ $checkval == 1 ]
      then
        git add $2
        git commit -m "${3}"
        git push origin "${4}"
      fi
  ;;
  help)
      echo -e "\n  Options   \t Description"
      echo -e "  =======   \t ======================================================================================================="
      echo -e "  hgs -ga   \t This option adds the specified directory or file before commit. Eg: hgs -ga . or hgs -ga <file or dir>"
      echo -e "  hgs -gc   \t This option adds and commits the code. Eg: hgs -ga . 'comments for commit'"
      echo -e "  hgs -gph  \t This option adds, commits and pushes the code to git repo Eg: hgs -gph . 'comments for commit' <branch name>"
      echo -e ""
  ;;
  *)
      echo "Error: Incorrect Syntax"
      echo "Expected: Use 'hgs help' to view the options"
  ;;
esac


